## 工作工单

### 一、优先配合现场实施工作

### 二、完成新增业务需求

### 三、处理报表中心中代理和会员部分按占成、洗码率、和局率、戏码类型分组查询

> 需要在表T_Agent_Bill_Day中新增字段"ChouShui",执行SQL脚本T_Agent_Bill_Day AddField_ChouShui	
>
> 需要修改归档代码	

### 四、测试老版本代理后台客户端与最近改动的代理后台服务的交互

### 五、已有交易的性能调优与代理后台测试客户端

* 已有交易的性能调优:

  > 1. 处理SQL模板：①尝试清除无效交易SQL以减少SQL模板文件大小，②将交易从SQL模板中读取到内存字典中，以提升获取交易SQL代码速度
  >
  > 2. 实施以建数据库索引的方式解决港督推广查询部分性能问题
  >
  >    > 执行命令: DBCC CHECKDB ,如果报错则执行修复命令（以防影响系统正常运行，此命令需在归档时执行），如果不报错则不用执行修复命令。（修复命令在http://210.48.139.241/game/issues/issues/306）
  >    >
  >    > 执行新建索引命令: http://210.48.139.241/game/issues/issues/292
  >
  > 3. 在以优化SQL命令以及新建索引的方式不能提升性能的情况下，需要考虑以空间换取时间解决性能提升问题。解决办法是对应具体的交易，看是否能在某些表中以添加字段的方式，存储冗余数据以解决性能问题
  >
  > 4. 用Dos.Orm替换掉SqlSugar框架，因为目前代理后台系统主要使用的是Dos.Orm框架，而只有在Sqlite使用到了SqlSugar，并且经测试SqlSugar性能相对太差
  >
  > 5. 清理代理后台冗余代码
  >
  >    > 在清理代码之前可以通过git发布版本，这样如果在代码清理过程中生产环境出现bug则将代码切换		    到此标签下进行修复bug
  >    >
  >    > 首先找到所有可以清理的代码，并且以”todo:“注释的方式标记位置，以便统一进行代码清理
  >    >
  >    > 清理完成之后

* 代理后台测试客户端

  > 在代理后台目录下搭建一个测试项目
  >
  > 将交易信息写到一个文本文件中

### 六、"自动投注机器人"开发准备

* 了解自动投注机器人的基本需求
* 了解对应的接口

